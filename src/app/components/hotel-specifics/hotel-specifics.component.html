
<nav class="header my-0 navbar  navbar-light" style="background-color: rgb(71, 71, 71) ">
  <h1 class="pl-1" style="color:white">Hotel Specifics CRUD Functions</h1>
  <button *ngIf="showAddHotelSpecsButton" (click)="clickAddSpecifics()" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" class="btn btn-success">Add Hotel Specifics</button>
</nav>

<div class="container">
  <form *ngFor="let specifics of hotelSpecifics" class="container mt-1 mb-2" style="width: 500px; border-style: ridge; ">
    <div class="form-group">
      <label for="exampleInputId">Id</label>
      <input type="text" class="form-control" aria-describedby="emailHelp" value={{specifics.id}}>
    </div>
    <div class="form-group">
      <label for="exampleInputEmail1">Hotel Name</label>
      <input type="text" class="form-control" aria-describedby="emailHelp" value={{specifics.name}}>
    </div>
    <div class="form-group">
      <label for="exampleInputAddress">Address</label>
      <input type="text" class="form-control" aria-describedby="emailHelp" value={{specifics.country}}>
    </div>
    <div class="form-group">
      <label for="exampleInputAddress">Address</label>
      <input type="text" class="form-control" aria-describedby="emailHelp" value={{specifics.city}}>
    </div>
    <div class="form-group">
      <label for="exampleInputAddress">Address</label>
      <input type="text" class="form-control" aria-describedby="emailHelp" value={{specifics.address}}>
    </div>
    <div class="form-group">
      <label for="exampleInputAddress">Address</label>
      <input type="text" class="form-control" aria-describedby="emailHelp" value={{specifics.postalCode}}>
    </div>
    <div class="form-group">
      <label for="exampleInputEmail">Email</label>
      <input type="email" class="form-control" aria-describedby="emailHelp" value={{specifics.email}}>
    </div>
    <div class="form-group">
      <label for="exampleInputRooms">Number Of Rooms</label>
      <input type="number" class="form-control" aria-describedby="emailHelp" value={{numberOfRooms}}>
    </div>
    <div class="form-group">
      <label for="exampleInputRooms">Season Start Date</label>
      <input type="text" class="form-control" aria-describedby="emailHelp" value={{specifics.startDate}}>
    </div>

    <button (click)="onEdit(hotelSpecifics[0])" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" class="btn btn-info"><i class="fa-solid fa-pen"></i> Edit</button>
  </form>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="exampleModalLabel">Hotel Specifics Details</h3>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!--Modal Body Start-->
      <div class="modal-body">
        <form [formGroup]="formValue">
          <div class="form-group">
            <label for="exampleInputType">Hotel Name</label>
            <input formControlName="name" type="text" class="form-control" id="exampleInputName" aria-describedby="TypeHelp" placeholder="Hotel Name">
            <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger mt-1">
              <div *ngIf="name?.errors?.['required']">
                Username is required
              </div>
              <div *ngIf="name?.errors?.['maxlength']">
                Name must be up to 50 characters long
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="exampleInputPersons">Country</label>
            <input formControlName="country" type="text" class="form-control" id="exampleInputAddress" aria-describedby="TypeHelp" placeholder="Country">
            <div *ngIf="country.invalid && (country.dirty || country.touched)" class="alert alert-danger mt-1">
              <div *ngIf="country?.errors?.['required']">
                Country is required
              </div>
              <div *ngIf="country?.errors?.['maxlength']">
                Address must be up to 50 characters long
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="exampleInputPersons">City</label>
            <input formControlName="city" type="text" class="form-control" id="exampleInputAddress" aria-describedby="TypeHelp" placeholder="City">
            <div *ngIf="city.invalid && (city.dirty || city.touched)" class="alert alert-danger mt-1">
              <div *ngIf="city?.errors?.['required']">
                City is required
              </div>
              <div *ngIf="city?.errors?.['maxlength']">
                City must be up to 50 characters long
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="exampleInputPersons">Address</label>
            <input formControlName="address" type="text" class="form-control" id="exampleInputAddress" aria-describedby="TypeHelp" placeholder="Address">
            <div *ngIf="address.invalid && (address.dirty || address.touched)" class="alert alert-danger mt-1">
              <div *ngIf="address?.errors?.['required']">
                Address is required
              </div>
              <div *ngIf="address?.errors?.['maxlength']">
                Address must be up to 50 characters long
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="exampleInputPersons">Postal Code</label>
            <input formControlName="postalCode" type="text" class="form-control" id="exampleInputAddress" aria-describedby="TypeHelp" placeholder="Postal Code">
            <div *ngIf="postalCode.invalid && (postalCode.dirty || postalCode.touched)" class="alert alert-danger mt-1">
              <div *ngIf="postalCode?.errors?.['required']">
                Postal Code is required
              </div>
              <div *ngIf="postalCode?.errors?.['maxlength']">
                Postal Code must be up to 10 characters long
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="exampleInputPersons">Email</label>
            <input formControlName="email" type="text" class="form-control" id="exampleInputemail" aria-describedby="TypeHelp" placeholder="Email">
            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger mt-1">
              <div *ngIf="email?.errors?.['required']">
                Email is required
              </div>
              <div *ngIf="email?.errors?.['pattern']">
                Wrong Email format
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="exampleInputPersons">Number of Rooms (This field is refreshed automatically)</label>
            <input [disabled]="isEnabled" formControlName="roomCounter" type="number" class="form-control" id="exampleNumRooms" aria-describedby="TypeHelp" placeholder="Number of Rooms">

          </div>

          <div class="form-group">
            <label for="exampleInputPersons">Start Season Date</label>
            <input formControlName="startDate" type="date" class="form-control" id="datePicker" aria-describedby="TypeHelp" placeholder="Start Season Date" min="{{currentDate | date:'yyyy-MM-dd'}}" required>
            <div *ngIf="startDate.invalid && (startDate.dirty || startDate.touched)" class="alert alert-danger mt-1">
              <div *ngIf="startDate?.errors?.['required']">
                Start Season Date is required
              </div>
            </div>
          </div>
          <!--button type="submit" class="btn btn-primary">Submit</!--button-->
        </form>
      </div>
      <!--Modal Body End-->
      <div class="modal-footer">
        <button type="button" id="cancel" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fa-solid fa-xmark"> </i> Close</button>
        <button *ngIf="showAdd" type="button" (click)="postSpecs()" class="btn btn-primary">Add</button>
       
        <button [disabled]="isLoading" *ngIf="showUpdate" type="button" (click)="postSpecs()" class="btn btn-primary">
          <img style="height:20px; width:20px" *ngIf="isLoading" src="assets/spinner.gif" /> <i class="fa-solid fa-wrench"></i> Update
        </button>
      </div>
    </div>
  </div>
</div>
